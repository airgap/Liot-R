function grab(a){if("string"===typeof a){var b=[];a.split("|").forEach(function(c){return b.push(document.getElementById(c))});return 1==b.length?b[0]:b}return a}function bind(a,b,c){iterate(grab(a),function(a){a.addEventListener(b,c);bind.bound[a]||(bind.bound[a]=[]);bind.bound[a].push(c)})}bind.bound={};function load(a){iterate(a,function(a){bind(window,"load",a)})}function log(a){grab("log").innerHTML=a}function remc(a,b){iterate(grab(a),function(a){a.classList.remove(b)})}
function addc(a,b){iterate(grab(a),function(a){a.classList.add(b)})}function hasc(a,b){return grab(a).classList.contains(b)}function togc(a,b){var c=grab(a),d=hasc(c,b);d?remc(c,b):addc(c,b);return!d}function togcp(a,b){iterate(grab(a),function(a){hasc(a,b)?remc(a,b):addc(a,b)})}function setc(a,b,c){iterate(grab(a),function(a){c?addc(a,b):remc(a,b)})}function iterate(a,b){Array.isArray(a)?a.forEach(b):b(a)}
function retrieve(a,b){var c=new XMLHttpRequest;c.open("GET",a);bind(c,"load",function(){b(c)});return c}function pang(a,b){var c=new XMLHttpRequest;c.open("GET",imgroot+"pangpacks/frames.pangpack");bind(c,"load",function(){b(c.response.split("|"))});c.send();return c}
if("undefined"==typeof BS){var getRegex=function(a){regex=a.getAttribute("bs-regex");a=regex.lastIndexOf("/");return new RegExp(regex.substring(1,a),regex.substr(a+1))};BS=function(a){a=(a||document).getElementsByClassName("bs-textbox");for(var b=0;b<a.length;b++)(function(a){var b=a.getAttribute("bs-correct"),c=a.getAttribute("bs-incorrect"),g=a.getAttribute("bs-empty");a.children[1].innerHTML=g;a.addEventListener("input",function(){var d=a.children[0],e=a.children[1],h=!1,f=d.value;f.length?a.classList.add("occupied"):
a.classList.remove("occupied");var k=getRegex(a);f.length?k.test(f)?(h=!0,e.innerHTML=b):e.innerHTML=c:e.innerHTML=g;d.setAttribute("bs-valid",h)});a.addEventListener("mousedown",function(){setTimeout(function(){a.children[0].focus()},0)})})(a[b])};BS.check=function(a){return"true"==a.getAttribute("bs-valid")};load(function(){BS()})};
