var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};var r=require("rethinkdb"),sortify=require("./sortify");
module.exports=function(a,c,f,l,g){a=[];f=["manufacture_date","manufacturer","model","series"];if(Array.isArray(g.collectors)){g=$jscomp.makeIterator(g.collectors);for(var b=g.next();!b.done;b=g.next())if(b=b.value,"object"===typeof b){var d={};if("object"===typeof b.device_info){var h=b.device_info;d.device_info={};for(var k=$jscomp.makeIterator(f),e=k.next();!e.done;e=k.next())e=e.value,"string"===typeof h[e]&&100>h[e].length&&(d.device_info[e]=h[e])}"string"===typeof b.name&&100>b.name.length&&
(d.name=b.name);d.value=0;d.smart=sortify(b.name||"");d.aggregate=!!b.aggregate;d.accessor=r.uuid();a.push(d)}r.table("Collectors").insert(a,{conflict:"replace"}).run(c,function(a,b){l.send(a?{err:"Could not create collectors."}:{})})}};
